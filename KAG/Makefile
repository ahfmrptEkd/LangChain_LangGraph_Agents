.PHONY: help start stop status logs clean install

# ê¸°ë³¸ íƒ€ê²Ÿ
help: ## ì‚¬ìš© ê°€ëŠ¥í•œ ëª…ë ¹ì–´ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤
	@echo "ğŸ”§ Neo4j ê´€ë¦¬ ëª…ë ¹ì–´:"
	@echo ""
	@grep -E '^[a-zA-Z_-]+:.*?## .*$$' $(MAKEFILE_LIST) | sort | awk 'BEGIN {FS = ":.*?## "}; {printf "  \033[36m%-15s\033[0m %s\n", $$1, $$2}'

start: ## Neo4j Docker ì»¨í…Œì´ë„ˆë¥¼ ì‹œì‘í•©ë‹ˆë‹¤
	@echo "ğŸš€ Neo4j Docker ì»¨í…Œì´ë„ˆë¥¼ ì‹œì‘í•©ë‹ˆë‹¤..."
	docker-compose up -d
	@echo "âœ… Neo4jê°€ ì„±ê³µì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤!"
	@echo ""
	@echo "ğŸ“Š Neo4j ë¸Œë¼ìš°ì €: http://localhost:7474"
	@echo "ğŸ”‘ ê¸°ë³¸ ë¡œê·¸ì¸ ì •ë³´:"
	@echo "   - ì‚¬ìš©ìëª…: neo4j"
	@echo "   - ë¹„ë°€ë²ˆí˜¸: password"

stop: ## Neo4j Docker ì»¨í…Œì´ë„ˆë¥¼ ì¤‘ì§€
	@echo "ğŸ›‘ Neo4j Docker ì»¨í…Œì´ë„ˆë¥¼ ì¤‘ì§€í•©ë‹ˆë‹¤..."
	docker-compose down
	@echo "âœ… Neo4jê°€ ì¤‘ì§€ë˜ì—ˆìŠµë‹ˆë‹¤."

status: ## ì»¨í…Œì´ë„ˆ ìƒíƒœë¥¼ í™•ì¸
	@echo "ğŸ” Neo4j ì»¨í…Œì´ë„ˆ ìƒíƒœ:"
	docker-compose ps

logs: ## Neo4j ë¡œê·¸ë¥¼ í™•ì¸
	@echo "ğŸ“‹ Neo4j ë¡œê·¸:"
	docker-compose logs neo4j

install: ## Python ì˜ì¡´ì„±ì„ ì„¤ì¹˜
	@echo "ğŸ“¦ Python ì˜ì¡´ì„±ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤..."
	@if [ -f "requirements.txt" ]; then \
		pip install -r requirements.txt; \
	else \
		echo "âŒ requirements.txt íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤."; \
	fi

clean: ## ëª¨ë“  ì»¨í…Œì´ë„ˆì™€ ë³¼ë¥¨ì„ ì‚­ì œ
	@echo "ğŸ§¹ ëª¨ë“  Neo4j ë°ì´í„°ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤..."
	docker-compose down -v
	@echo "âœ… ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."

restart: stop start ## Neo4jë¥¼ ì¬ì‹œì‘

# ê°œë°œìš© ëª…ë ¹ì–´
dev: install start test ## ê°œë°œ í™˜ê²½ì„ ì„¤ì • (ì„¤ì¹˜ + ì‹œì‘ + í…ŒìŠ¤íŠ¸) 